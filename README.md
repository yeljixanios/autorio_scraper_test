# AutoRia Scraper

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Å–∫—Ä–∞–ø–µ—Ä –¥–ª—è –∑–±–æ—Ä—É –æ–≥–æ–ª–æ—à–µ–Ω—å –ø—Ä–æ –±/—É –∞–≤—Ç–æ –∑ [AutoRia](https://auto.ria.com) —ñ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º —É PostgreSQL —Ç–∞ —â–æ–¥–µ–Ω–Ω–∏–º –¥–∞–º–ø–æ–º –ë–î. –ü—ñ–¥—Ç—Ä–∏–º—É—î –∑–∞–ø—É—Å–∫ —É Docker.

---

## üîß –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- ‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Å–∫—Ä–∞–ø—ñ–Ω–≥ (`aiohttp`, `asyncio`)
- üîÅ –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –¥—É–±–ª—ñ–≤ (—É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å –ø–æ URL)
- üíæ –©–æ–¥–µ–Ω–Ω–∏–π –¥–∞–º–ø –ë–î —É –ø–∞–ø–∫—É `dumps/`
- ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ `.env`
- üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è
- üê≥ Docker / Docker Compose –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
autoria_scraper/
‚îú‚îÄ‚îÄ app/                        # –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ scraper.py              # –õ–æ–≥—ñ–∫–∞ —Å–∫—Ä–∞–ø—ñ–Ω–≥—É AutoRia
‚îÇ   ‚îú‚îÄ‚îÄ models.py               # SQLAlchemy-–º–æ–¥–µ–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ scheduler.py            # –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ config.py               # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—ñ–≤ –∑ .env
‚îÇ   ‚îú‚îÄ‚îÄ logger.py               # –õ–æ–≥—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ ...                     # –Ü–Ω—à—ñ –º–æ–¥—É–ª—ñ (dumper, db, utils —Ç–æ—â–æ)
‚îú‚îÄ‚îÄ dumps/                      # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –¥–∞–º–ø–∏ –ë–î
‚îú‚îÄ‚îÄ logs/                       # –õ–æ–≥–∏ —Ä–æ–±–æ—Ç–∏
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ README.md                   # –¶–µ–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ .env                        # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –∫–æ–Ω—Ñ—ñ–≥
‚îî‚îÄ‚îÄ Dockerfile                  # Docker-–æ–±—Ä–∞–∑
```

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É –∑—ñ –∑–º—ñ–Ω–Ω–∏–º–∏:

```env
DATABASE_URL=postgresql://user:password@localhost:5432/autoria
START_URL=https://auto.ria.com/uk/car/used/
SCRAPE_TIME=12:00
DUMP_TIME=12:05
CONCURRENT_REQUESTS=10
REQUEST_TIMEOUT=30
RETRY_ATTEMPTS=3
RETRY_DELAY=5
```

---

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone <repository-url>
cd autoria_scraper
```

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 3. –°—Ç–≤–æ—Ä—ñ—Ç—å `.env`, —è–∫ –æ–ø–∏—Å–∞–Ω–æ –≤–∏—â–µ.

### 4. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker-compose up -d --build
```

–ê–±–æ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º –±—ñ–ª–¥–æ–º:

```bash
docker-compose build
docker-compose up -d
```

### 5. –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker

```bash
python -m app.scheduler
```

### 6. –¢–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —á–∞—Å—É

```bash
python -m app.scheduler --test-now
```

---

## üóÉÔ∏è –°—Ö–µ–º–∞ –ë–î

| –ü–æ–ª–µ           | –¢–∏–ø      | –û–ø–∏—Å                        |
|----------------|----------|-----------------------------|
| `url`          | string   | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π URL –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è   |
| `title`        | string   | –ù–∞–∑–≤–∞ –∞–≤—Ç–æ                  |
| `price_usd`    | integer  | –¶—ñ–Ω–∞ –≤ –¥–æ–ª–∞—Ä–∞—Ö              |
| `odometer`     | integer  | –ü—Ä–æ–±—ñ–≥ (–∫–º)                 |
| `username`     | string   | –Ü–º‚Äô—è –ø—Ä–æ–¥–∞–≤—Ü—è               |
| `phone_number` | string   | –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É              |
| `image_url`    | string   | –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≥–æ–ª–æ–≤–Ω–µ —Ñ–æ—Ç–æ  |
| `images_count` | integer  | –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ñ–æ—Ç–æ              |
| `car_number`   | string   | –ù–æ–º–µ—Ä –∞–≤—Ç–æ                  |
| `car_vin`      | string   | VIN-–∫–æ–¥                     |
| `datetime_found` | datetime | –î–∞—Ç–∞/—á–∞—Å —Å–∫—Ä–∞–ø—ñ–Ω–≥—É        |

---

## üì¶ –î–∞–º–ø–∏ –ë–î

–§–∞–π–ª–∏ –¥–∞–º–ø—É –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É –∫–∞—Ç–∞–ª–æ–∑—ñ `dumps/` —É —Å—Ç–∏—Å–Ω—É—Ç–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ. –ù–∞–∑–≤–∞ –≤–∫–ª—é—á–∞—î –¥–∞—Ç—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è.

---

